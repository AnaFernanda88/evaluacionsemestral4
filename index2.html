<!-- CÓDIGO COMPLETO ACTUALIZADO -->
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Protocolo de Investigación</title>
  <style>
    body {
      background-color: #f2f0ed;
      color: #3c3c3c;
      font-family: 'Segoe UI', sans-serif;
      margin: 0;
      padding: 0;
    }

    .titulo-portada {
  font-size: 4em;
  text-align: center;
  color: #a97b65;
  margin-bottom: 30px;
}
    .pantalla {
      display: none;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      padding: 40px 20px;
    }
    .visible {
      display: flex;
    }
    .titulo {
      font-size: 3em;
      margin-bottom: 30px;
      text-align: center;
      color: #a97b65;
      position: relative;
  z-index: 3; /* asegúrate de que sea más alto que el SVG */
  background-color: #f2f0ed; /* color de fondo para ocultar la línea */
  padding: 0 10px;
  display: inline-block;
    }
    .contenido-capa {
      position: relative;
      width: 100%;
      max-width: 1200px;
      height: 700px;
      overflow: visible;
    }
    .contenido-capa svg {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 70%;
      height: auto;
      z-index: -1;
      pointer-events: none;
    }
    .contenedor-cerebro {
      position: absolute;
      top: 35%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 30%;
      aspect-ratio: 5 / 7;
      z-index: 2;
      animation: pulso 3s infinite ease-in-out;
    }
    @keyframes pulso {
      0%, 100% { transform: translate(-50%, -50%) scale(1); }
      50% { transform: translate(-50%, -50%) scale(1.03); }
    }
    .capa {
      position: absolute;
      width: 100%;
      height: 100%;
      object-fit: contain;
      opacity: 0;
      transition: opacity 1.8s ease;
    }
    .capa.visible {
      opacity: 1;
    }
    .nodo {
      background-color: #fffaf5;
      padding: 16px;
      border-radius: 10px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      opacity: 1;
      display: flex;
      flex-direction: column;
      position: absolute;
      width: 600px;
      z-index: 3;
    }
    .nodo h3 {
      margin: 0 0 8px 0;
      font-size: 1.6em;
      font-weight: bold;
      text-align: left;
      color: #a97b65;
    }
    .nodo p {
      margin: 0;
      text-align: left;
      font-size: 1.2em;
    }

    .nodo li {
  font-size: 1.2em;
  line-height: 1.4;
}

.nodo ul {
  margin: 0;
  padding-left: 18px;
}

    .particula {
      position: absolute;
      width: 15px;
      height: 15px;
      background-color: #a97b65;
      border-radius: 50%;
      opacity: 0.8;
      z-index: 1;
      box-shadow: 0 0 12px rgba(169, 123, 101, 0.6);
      transition: box-shadow 0.2s ease;
    }
    .botones {
      display: flex;
      gap: 20px;
      margin-top: 10px;
      justify-content: center;
    }
    .boton {
      padding: 16px 32px;
      font-size: 1.1em;
      background-color: #e8b4a3;
      color: #ffffff;
      font-weight: bold;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }
    .boton:hover {
      background-color: #d49684;
    }
    
    .calendario-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(380px, 1fr));
  gap: 32px;
  margin: 60px auto;
  max-width: 1200px;
  padding: 0 20px;
}

.mes {
  background: linear-gradient(145deg, #fffaf5, #fbe5dc);
  border: 1px solid #e8c7b9;
  padding: 28px;
  border-radius: 16px;
  box-shadow: 0 8px 20px rgba(0, 0, 0, 0.06);
  transition: transform 0.3s ease, box-shadow 0.3s ease;
  opacity: 0;
  transform: translateY(40px);
}

.mes:hover {
  transform: translateY(-8px);
  box-shadow: 0 12px 30px rgba(0, 0, 0, 0.1);
}

.mes h3 {
  margin-top: 0;
  font-size: 1.3em;
  color: #b3755f;
  border-bottom: 1px solid #e0bcb0;
  padding-bottom: 6px;
  margin-bottom: 10px;
}

.mes ul {
  padding-left: 20px;
  margin: 0;
}

.mes ul li {
  font-size: 1.5em;
  margin-bottom: 6px;
}

</style>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
</head>
<body>

<div class="pantalla visible" id="pantallaPortadaPrincipal">
  <div style="display: flex; flex-direction: column; justify-content: center; align-items: center; min-height: 100vh; padding: 60px 20px;">

    <img src="https://psicologia.posgrado.unam.mx/pospago/images/logo.png"
         alt="UNAM Posgrado"
         style="width: 200px; height: auto; margin-bottom: 40px;" />

    <div style="text-align: center; max-width: 1000px;">
      <p style="font-size: 2.4em; font-weight: bold; margin: 0.3em 0;">UNIVERSIDAD NACIONAL AUTÓNOMA DE MÉXICO</p>
      <p style="font-size: 2.2em; font-weight: bold; margin: 0.3em 0;">Programa de Maestría y Doctorado en Psicología</p>
      <p style="font-size: 2.2em; font-weight: bold; margin: 0.3em 0 1.5em;">Psicología Educativa y del Desarrollo (PED)</p>

      <p style="font-size: 1.8em; color: #a97b65; line-height: 1.5; margin-bottom: 2em;">
        Desarrollo de Funciones Ejecutivas y Habilidades<br>
        Socioemocionales como mediadoras en el rendimiento<br>
        académico de estudiantes universitarios 
      </p>

      <p style="font-size: 1.6em; font-weight: bold; margin-bottom: 10px;">Comité Tutor:</p>
      <p style="font-size: 1.6em; margin: 4px;">Dra. Benilde García Cabrero – Tutora Principal</p>
      <p style="font-size: 1.6em; margin: 4px;">Dr. Oscar Zamora Arévalo – Tutor Adjunto</p>
      <p style="font-size: 1.6em; margin: 4px;">Dra. María Luisa García Gomar – Tutora Externa</p>
    </div>

  <!-- Botón con estilo bonito como los demás -->
  <div class="botones" style="margin-top: 40px;">
    <button class="boton" onclick="mostrarPantallaEstado()">Continuar</button>
  </div>
</div>
</div>



  <div class="pantalla pantalla-estado" id="pantallaEstado">
  <h1 class="titulo-portada">Avances del Estado del Arte</h1>
  <button class="boton" onclick="mostrarLineaTiempo()">Continuar</button>
</div>

<div class="pantalla" id="pantallaLineaTiempo">
  <h1 class="titulo-portada">LÍNEA DEL TIEMPO</h1>
  <div style="width: 100%; padding: 0 0; display: flex; justify-content: center;">
    <iframe 
      src="https://cdn.knightlab.com/libs/timeline3/latest/embed/index.html?source=v2%3A2PACX-1vR75eKZIiIYnrAazrPyutxXOWU9xj_TgrPn1I_Uf1J1lKztNY3GQ9DLvirj8NmxhZIGAdHw3TOGX_iT&font=Default&lang=en&initial_zoom=2&width=100%25&height=650"
      style="width: 90vw; max-width: 1400px; height: 700px; border: none;"
      allowfullscreen
      webkitallowfullscreen
      mozallowfullscreen>
    </iframe>
  </div>
  <div class="botones">
    <button class="boton" onclick="mostrarPantallaInicio()">Continuar</button>
  </div>
</div>


  <div class="pantalla pantalla-inicio" id="pantallaInicio">
    <h1 class="titulo-portada">Protocolo de Investigación</h1>
    <button class="boton" onclick="iniciarProtocolo()">Continuar</button>
  </div>

  <div class="pantalla" id="pantallaCapas">
    <h1 class="titulo" id="tituloCapa">De dónde surge esta investigación</h1>
    <div class="contenido-capa" id="contenidoCapa">
      <!-- Círculo decorativo tipo reloj -->
      <svg viewBox="0 0 200 200">
        <circle cx="100" cy="100" r="95" fill="none" stroke="#d9b6a9" stroke-width="2" stroke-dasharray="4 4" stroke-opacity="0.6" />
      </svg>

      <div class="contenedor-cerebro" id="contenedor">
        <img src="https://i.postimg.cc/brtjww88/Capa-1.png" class="capa" />
        <img src="https://i.postimg.cc/Dm33J3yG/Capa-2.png" class="capa" />
        <img src="https://i.postimg.cc/66k8L78r/Capa-3.png" class="capa" />
        <img src="https://i.postimg.cc/wjH3ZSc3/Capa-4.png" class="capa" />
        <img src="https://i.postimg.cc/CxNdgmm7/Capa-5.png" class="capa" />
      </div>
      <div id="nodoContainer"></div>
    </div>
    <div class="botones">
      <button class="boton" onclick="cambiarCapa(-1)">Regresar</button>
      <button class="boton" onclick="cambiarCapa(1)">Avanzar</button>
    </div>
  </div>
  <div class="pantalla" id="pantallaFlashcards">
  <h1 class="titulo">Cronograma de Actividades</h1>
  <div class="calendario-grid" id="flashcards"></div>
</div>
<script>
  const capas = document.querySelectorAll('.capa');
  const pantallaInicio = document.getElementById('pantallaInicio');
  const pantallaCapas = document.getElementById('pantallaCapas');
  const tituloCapa = document.getElementById('tituloCapa');
  const contenedorNodos = document.getElementById('nodoContainer');
  const contenedorCerebro = document.getElementById('contenedor');
  const contenidoCapa = document.getElementById('contenidoCapa');
  let indice = 0;

  const titulos = ["De dónde surge esta investigación", "Por qué es relevante y necesaria", "Qué se desea saber y lograr", "Qué se va a observar y cómo se define", "Cómo se llevará a cabo la investigación"];

  const posiciones = [
  { top: '18%', left: '-25%' },       // Nodo 1 (arriba izquierda)
  { top: '18%', right: '-25%' },      // Nodo 2 (arriba derecha)
  { bottom: '5%', left: '50%', transform: 'translateX(-50%)' }, // Nodo 3 (abajo centro)
  { top: '50%', left: '-25%' },       // Nodo 4 (abajo izquierda)
  { top: '50%', right: '-25%' }       // Nodo 5 (abajo derecha)
];

const posicionesCapaFinal = [
  { top: '18%', left: '-25%' },     // Nodo 1
  { top: '18%', right: '-25%' },    // Nodo 2
  { top: '60%', left: '-15%' },     // Nodo 3
  { top: '60%', right: '-15%' }     // Nodo 4
];

  const nodosPorCapa = [
      [
        { titulo: "1. Habilidad clave para adaptarse", texto: "La flexibilidad cognitiva es fundamental en contextos inciertos y cambiantes. Está vinculada con autorregulación, resolución de problemas y toma de decisiones." },
        { titulo: "2. Potencial educativo poco explorado", texto: "Aunque es crucial en entornos de aprendizaje, hay pocos estudios sobre flexibilidad cognitiva en educación superior, especialmente en América Latina." },
        { titulo: "5. Imaginería como vía emergente", texto: "Las herramientas usadas en la universidad provienen de contextos clínicos o experimentales, y no reflejan bien la dinámica educativa real." },
        { titulo: "3. Limitaciones de los instrumentos actuales ", texto: "El uso de imaginación visual es prometedor, pero aún no ha sido explorado sistemáticamente para entrenar flexibilidad cognitiva en educación." },
        { titulo: "4. Vacíos metodológicos ", texto: "Predomina el enfoque cuantitativo. Falta comprender la experiencia subjetiva del estudiante y las condiciones que favorecen su desarrollo." }
      ],
      [
        { titulo: "1. Inserción institucional", texto: "Parte del proyecto de Fortalecimiento Académico del Laboratorio de Tecnologías Digitales (UNAM)." },
        { titulo: "2. Impacto regional", texto: "Busca cerrar brechas geográficas en la investigación desde América Latina y el contexto mexicano." },
        { titulo: "5. Validación psicométrica", texto: "Adapta el CFI (Cognitive Flexibility Inventory) para población mexicana, contribuyendo con evidencia válida y contextual." },
        { titulo: "3. Aporte teórico situado", texto: "Propone una visión contextualizada de la flexibilidad cognitiva, vinculada al entorno sociocultural y educativo real." },
        { titulo: "4. Imaginería y nuevas rutas", texto: "Explora la relación entre visualización mental y flexibilidad cognitiva como posible vía innovadora de fortalecimiento." }
      ],
      [
        { titulo: "1. Preguntas de investigación", texto: `<ul><li>¿Cuál es el nivel de flexibilidad cognitiva de los estudiantes?</li><li>¿Qué expresan los estudiantes sobre el microcurso y qué ajustes propone ese análisis?</li><li>¿Qué relación hay entre la dimensión de “sustitución” del BRIEF-A y el CFI?</li><li>¿Qué efecto tienen los ejercicios cognitivos, la imaginería visual y su combinación?</li></ul>` },
        { titulo: "2. Objetivo general", texto: "Explorar y  medir el efecto diferencial de la imaginería visual y los ejercicios cognitivos sobre la flexibilidad cognitiva de  estudiantes universitarios de la Facultad de Psicología." },
        { titulo: "3. Objetivos específicos", texto: `<ul><li>Medición con CFI</li><li>Análisis cualitativo del microcurso</li><li>Relación BRIEF-A y CFI</li><li>Diseño comparativo de intervención</li><li>Justificación teórica de la imaginería</li></ul>` }
      ],
      [
        { titulo: "1. Flexibilidad cognitiva", texto: "Cambiar de estrategia, adoptar nuevas perspectivas y resolver desafíos cuando el entorno cambia." },
        { titulo: "2. Sustitución (Shift - BRIEF-A)", texto: "Capacidad de abandonar respuestas inadecuadas y generar otras nuevas." },
        { titulo: "5. Imaginería visual", texto: "Uso voluntario de imágenes mentales para anticipar acciones o imaginar escenarios posibles." },
        { titulo: "3. Memoria de trabajo (BRIEF-A)", texto: "Habilidad para retener y manipular información en tiempo real durante la resolución de tareas." },
        { titulo: "4. Inhibición (BRIEF-A)", texto: "Capacidad de controlar impulsos, evitar respuestas automáticas e interferencias innecesarias." }
      ],
      [
        { titulo: "1. Participantes y contexto", texto: `<ul><li>Estudiantes de Psicología, distintos semestres</li><li>Proyecto institucional post-COVID</li><li>Grupos heterogéneos por diseño</li></ul>` },
        { titulo: "2. Diseño y fases del estudio", texto: `<ul><li>Fase 1: Análisis cualitativo del curso piloto</li><li>Fase 2: Adaptación psicométrica del CFI y análisis correlacional</li><li>Fase 3: Intervención comparativa (tres grupos)</li></ul>` },
        { titulo: "3. Procedimiento", texto: `<ul><li>Fase 1: Análisis temático de reflexiones</li><li>Fase 2: Adaptación y validación del CFI</li><li>Fase 3: Implementación de tres condiciones experimentales</li></ul>` },
        { titulo: "4. Análisis estadístico", texto: `<ul><li>ANOVA-RM y post-hoc</li><li>Regresiones múltiples</li><li>SEM (modelos de ecuaciones estructurales)</li><li>Tamaño de efecto y moderadores</li></ul>` }
      ]
    ];

  function mostrarPantallaEstado() {
  document.getElementById('pantallaPortadaPrincipal').classList.remove('visible');
  document.getElementById('pantallaEstado').classList.add('visible');
}


    function iniciarProtocolo() {
    pantallaInicio.classList.remove('visible');
    pantallaCapas.classList.add('visible');
    mostrarCapa();
  }

  function cambiarCapa(direccion) {
    indice += direccion;
    if (indice < 0) indice = 0;
    if (indice > capas.length - 1) {
  mostrarFlashcards();
  return;
}
    mostrarCapa();
  }

  function mostrarCapa() {
    capas.forEach(c => c.classList.remove('visible'));
    capas[indice].classList.add('visible');
    tituloCapa.textContent = titulos[indice];
    contenedorNodos.innerHTML = '';
    document.querySelectorAll('.particula').forEach(p => p.remove());
    const layout = indice === 4 ? posicionesCapaFinal : posiciones;

layout.forEach((pos, i) => {
  const div = document.createElement('div');
      div.className = 'nodo';
      Object.assign(div.style, pos);
      div.innerHTML = `<h3>${nodosPorCapa[indice][i].titulo}</h3><p>${nodosPorCapa[indice][i].texto}</p>`;
      contenedorNodos.appendChild(div);
      lanzarParticulaHacia(div);
    });
  }

const pantallaEstado = document.getElementById('pantallaEstado');
const pantallaLineaTiempo = document.getElementById('pantallaLineaTiempo');

function mostrarLineaTiempo() {
  pantallaEstado.classList.remove('visible');
  pantallaLineaTiempo.classList.add('visible');
}

function mostrarPantallaProtocolo() {
  pantallaLineaTiempo.classList.remove('visible');
  pantallaInicio.classList.add('visible');
  mostrarCapa();
}

function mostrarPantallaInicio() {
  pantallaLineaTiempo.classList.remove('visible');
  pantallaInicio.classList.add('visible');
}



  function lanzarParticulaHacia(destino) {
  const particula = document.createElement('div');
  particula.className = 'particula';
  contenidoCapa.appendChild(particula);

  // Coordenadas fijas relativas a .contenido-capa
  const startX = 600;
  const startY = 150; // un poco más arriba del centro del cerebro

  const target = destino.getBoundingClientRect();
  const containerRect = contenidoCapa.getBoundingClientRect();
  const endX = target.left + target.width / 2 - containerRect.left;
  const endY = target.top + target.height / 2 - containerRect.top;

  particula.style.left = `${startX}px`;
  particula.style.top = `${startY}px`;

  anime({
    targets: particula,
    translateX: endX - startX,
    translateY: endY - startY,
    opacity: [1, 0],
    duration: 3200,
    easing: 'easeInOutQuad',
    complete: () => particula.remove()
  });
}

function mostrarFlashcards() {
  pantallaCapas.classList.remove('visible');
  pantallaFlashcards.classList.add('visible');
  flashcards.innerHTML = `
    <div class="mes">
      <h3>Agosto–Octubre 2025</h3>
      <ul>
        <li>Revisión sistemática sobre flexibilidad cognitiva</li>
        <li>Inicio de traducción del CFI</li>
      </ul>
    </div>
    <div class="mes">
      <h3>Octubre–Diciembre 2025</h3>
      <ul>
        <li>Revisión por expertos y pilotaje del CFI</li>
        <li>Análisis cualitativo del curso piloto</li>
      </ul>
    </div>
    <div class="mes">
      <h3>Enero–Febrero 2026</h3>
      <ul>
        <li>Primera aplicación experimental (invierno)</li>
        <li>Evaluación con CFI y BRIEF</li>
      </ul>
    </div>
    <div class="mes">
      <h3>Marzo–Abril 2026</h3>
      <ul>
        <li>Análisis cualitativo post intervención</li>
      </ul>
    </div>
    <div class="mes">
      <h3>Mayo 2026</h3>
      <ul>
        <li>Ajustes pedagógicos a las intervenciones</li>
      </ul>
    </div>
    <div class="mes">
      <h3>Junio 2026</h3>
      <ul>
        <li>Segunda aplicación experimental (verano)</li>
        <li>Evaluación pre y postest</li>
      </ul>
    </div>
    <div class="mes">
      <h3>Agosto–Diciembre 2026</h3>
      <ul>
        <li>Análisis comparativo y SEM</li>
      </ul>
    </div>
    <div class="mes">
      <h3>Febrero–Abril 2027</h3>
      <ul>
        <li>Análisis cualitativo de rediseño</li>
      </ul>
    </div>
    <div class="mes">
      <h3>Mayo–Julio 2027</h3>
      <ul>
        <li>Integración de resultados y difusión académica</li>
      </ul>
    </div>
  `;

  // Aquí va la animación, FUERA del template
  anime({
    targets: '.mes',
    opacity: [0, 1],
    translateY: [40, 0],
    delay: anime.stagger(150),
    duration: 800,
    easing: 'easeOutQuad'
  });
}


</script>
</body>
</html>
